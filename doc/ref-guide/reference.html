<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>








  
    



<meta http-equiv="content-type" content="text/html; charset=utf-8"><title>Safe Browsing API - Safe Browsing API</title>

<link href="reference_files/base-200612.css" type="text/css" rel="stylesheet">


    <link href="reference_files/dev_docs.css" rel="stylesheet" type="text/css">
    <link href="reference_files/product-page.css" rel="stylesheet" type="text/css"></head><body>
    







<div id="gaia">
  &nbsp;
</div>

<div id="header">
  <div id="logo"><a href="http://code.google.com/"><img src="reference_files/code_sm.png" alt="Google"></a></div>
  <div id="title">
    
      Google Safe Browsing API
    
  </div>
  <div id="breadcrumbs">
    
      <span class="item"><a href="http://code.google.com/">Google Code Home</a></span> &gt;
      
  <span class="item"><a href="http://code.google.com/apis/safebrowsing/">Google Safe Browing API</a></span>
  
    &gt; 
  <span class="item"><a class="selected" href="http://code.google.com/apis/safebrowsing/reference.html">Reference Guide</a></span>

  

    
  </div>
</div>

<div id="side" dir="ltr">
  <div id="menu">
    
      
<h4>Safe Browsing API</h4>

<ul>
  <li><a href="http://code.google.com/apis/safebrowsing/">Overview</a></li>
  <li><a href="http://code.google.com/apis/safebrowsing/key_signup.html">Sign up for an API key</a></li>
  <li><a href="http://code.google.com/apis/safebrowsing/developers_guide.html">Developer's Guide</a></li>
  <li><a class="selected" href="http://code.google.com/apis/safebrowsing/reference.html">Reference Guide</a></li>
  <li><a href="http://groups.google.com/group/google-safe-browsing-api">Discussion Group</a></li>
</ul>

    
  </div>

  <div id="search">
  <form id="searchbox_015986126177484454297:pfmwlvdl42y" action="http://www.google.com/cse">
    <input name="cx" value="015986126177484454297:pfmwlvdl42y" type="hidden">
    <input name="cof" value="FORID:0" type="hidden">
	<div class="header">Search Google Code:</div>
          <input style="background: rgb(255, 255, 255) url(http://google.com/coop/images/google_custom_search_watermark.gif) no-repeat scroll left center; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;" name="q" size="20" type="text">
          <input name="sa" value="Search" type="submit"><br>
        </form>
        <script type="text/javascript" src="reference_files/brand.html"></script>
      </div>
    
  </div>




<script type="text/javascript">
//<![CDATA[

function walk(element, condition, operation) {
  if (!element) return;
  if (condition(element)) {
    operation(element);
    return;
  }
  for (var e = element.firstChild; e != null; e = e.nextSibling) {
    walk(e, condition, operation);
  }
}

function isCurrentLink(e) {
  return e.tagName == "A" && e.href == window.location.href;
}

function makeSelected(e) {
  e.className = "selected";
}

walk(document.getElementById("breadcrumbs"), isCurrentLink, makeSelected);
walk(document.getElementById("menu"), isCurrentLink, makeSelected);

//]]>
</script>

<div id="body">



    <h1 id="page_title">Safe Browsing API Reference Guide </h1>
	<h1>Contents</h1>
	<div class="toc">
	  <ol>
		<li><a href="#Audience">Audience</a></li>
		<li><a href="#RequestTypes">Request Types</a></li>
		<li><a href="#QueryParams">Query Parameters</a></li>
		<li><a href="#CanonicalizationExamples">Canonicalization Examples</a></li>
	  </ol>
	</div>

<h1><a name="Audience" id="Audience"></a>Audience</h1>
  <p>This document is intended for programmers who want to use Google phishing and
  malware data to protect users from potentially malicious websites.</p>
  <p>
  It's a reference document; it assumes that you understand the concepts
  presented in the
  <a href="http://code.google.com/apis/safebrowsing/developers_guide.html">Developer's Guide</a>.
  </p>
  <h1><a name="RequestTypes" id="RequestTypes"></a>Request Types</h1>
  <p>
    The API consists of two different types of HTTP requests:
  </p>
  <ul>
    <li>
      <b>https://sb-ssl.google.com/safebrowsing/getkey</b>: This request
      requires SSL support. It provides the client with a private key for
      confidential communication with the server.
    </li>
  </ul>
  <ul>
    <li>
      <b>http://sb.google.com/safebrowsing/update</b>: The client provides a
      list of tables that it wants the server to update. The server either
      provides the full content of the current tables or incremental updates to
      bring the client's tables up to the current version.
    </li>
  </ul>
  <p>The <b>getkey</b> request takes one required
  parameter (<b>client</b>).</p>
  <p>The response to the <b>getkey</b> request
  includes a client key and a wrapped key.</p>
  
  <p>The <b>update</b> request takes three required
  parameters (<b>client</b>, <b>apikey</b> and
  <b>version</b> and
  one optional parameter (<b>wrkey</b>).</p>
  <p>The response to the
  <b>update</b> request includes the appropriate
  table data, to bring that client up to date.</p>
  <h1><a name="QueryParams" id="QueryParams"></a>Query Parameters</h1>  
  <p>The API supports the following query parameters:</p>
  <ul>
    <li>
      <b>client</b> - should be used to specify the type of client, in this case "api". (Required for both <b>getkey</b> and <b>update</b> requests.)
    </li>
    <li>
      <b>apikey</b> - authenticates the user as a valid api user. See the
      <em>Getting Started</em> section in the <a href="http://code.google.com/apis/safebrowsing/developers_guide.html">Developer's Guide</a> for information on getting an API key. (Required
      for <b>update</b> request only)
    </li>
    <li>
      <b>version</b> - specifies the tables and versions that the client has, i.e.
      "version=goog-black-hash:1:432,goog-malware-hash:1:32". (Required
      for <b>update</b> request only)
    </li>
    <li>
      <b>wrkey</b> - the wrapped key sent by the
      server in response to a <b>getkey</b>
      request. It should only be used if the client wishes to receive a
      MAC. (Optional for <span style="font-weight: bold;">update</span>
      request)
    </li>
  </ul>
  <h1><a name="CanonicalizationExamples" id="CanonicalizationExamples"></a>Canonicalization Examples</h1>
  <p>This section provides some examples of canonicalizing IP addresses and
  URLs. To make sure you're able to look up URLs in the blacklists, you
  should verify that your client implementation handles these test cases
  correctly.</p>
  <p>The first set of examples covers normalizing IP addresses into dotted decimal
  form:</p>
<table>
 <tbody><tr>
	<td><b>Original</b></td>
	<td><b>Canonicalized</b></td>
	<td><b>Explanation</b></td>
 </tr>
 <tr>
	<td>1.2.3.4</td>
	<td>1.2.3.4</td>
	<td>normal decimal form</td>
 </tr>
 <tr>
	<td>012.034.01.055</td>
	<td>10.28.1.145</td>
	<td>octal components, identified by a leading zero</td>
 </tr>
 <tr>
	<td>0x12.0x43.0x44.0x01</td>
	<td>18.67.68.1</td>
	<td>hex components, identified by a leading 0[xX]</td>
 </tr>
 <tr>
	<td>167838211</td>
	<td>10.1.2.3</td>
	<td>fewer than 4 components, extend the last component to fill the remaining bytes</td>
 </tr>
 <tr>
	<td>12.0x12.01234</td>
	<td>12.18.2.156</td>
	<td>mixed bases, fewer than 4 components</td>
 </tr>
 <tr>
	<td>276.2.3</td>
	<td>20.2.0.3</td>
	<td>since 276 is not the last component, it's only allowed to take up 1 byte in the result</td>
 </tr>
 <tr>
	<td>0x10000000b</td>
	<td>0.0.0.11</td>
	<td>if the number is larger than 32 bits, take the low 32 bits</td>
 </tr>
 </tbody></table>
 <p>
 The following strings are not well-formed IP addresses, and should not be normalized:
 <br>
"0x120x34"<br>
"123.123.0.0.1"<br>
"1.2.3.00x0"
</p>
<p>These examples cover canonicalizing URLs so that they can be used to create suffix/prefix expressions:</p>
<table>
 <tbody><tr>
	<td><b>Original</b></td>
	<td><b>Canonicalized</b></td>
	<td><b>Explanation</b></td>
 </tr>
 <tr>
	<td>http://google.com/</td>
	<td>http://google.com/ </td>
	<td>already in canonical form</td>
 </tr>
 <tr>
	<td>http://GOOgle.com</td>
	<td>http://google.com/</td>
	<td>need a trailing slash, and lowercase the host</td>
 </tr>
 <tr>
	<td> http://..google..com../</td>
	<td>http://google.com/</td>
	<td>strip leading and trailing dots, collapse multiple dots</td>
 </tr>
 <tr>
	<td>http://google.com/%25%34%31%25%31%46</td>
	<td>http://google.com/A%1F </td>
	<td>fully unescape, then re-escape once</td>
 </tr>
 <tr>
	<td>http://google^.com/</td>
	<td>http://google%5E.com/</td>
	<td>escape characters in the hostname</td>
 </tr>
 <tr>
	<td>http://google.com/1/../2/././</td>
	<td>http://google.com/2/</td>
	<td>relative path resolution</td>
 </tr>
 <tr>
	<td>http://google.com/1//2?3//4</td>
	<td>http://google.com/1/2?3//4</td>
	<td>collapse consecutive slashes in the path</td>
 </tr>
</tbody></table>

    





</div> 

<div id="footer" dir="ltr">
  
  <div class="text">
  
    Â©2007 Google -
    <a href="http://www.google.com/">Google Home</a> -
    <a href="http://www.google.com/jobs/">We're Hiring</a> -
    <a href="http://code.google.com/apis/safebrowsing/terms.html">Terms of Service</a> -
    <a href="http://www.google.com/privacy.html">Privacy Policy</a> -
    <a href="http://groups.google.com/group/google-safe-browsing-api">Discussion Group</a>
  
  </div>
</div>

<script style="display: none;" src="reference_files/urchin.js" type="text/javascript">
</script>


<script type="text/javascript">
  _uacct="UA-18071-1"; // code.google.com site-wide tracking
  _uanchor=1;
  _uff=0;
  urchinTracker();
</script>


    
  </body></html>